<div class="form-header">
  <h2>Create an Account</h2>
</div>

<form [formGroup]="signupForm" (ngSubmit)="Submit()">
  <label for="username">Username:</label>
  <input type="text" formControlName="username" maxlength="25" />
  @if (isUsernameInvalid) {

  @if (signupForm.get('username')?.hasError('required')) {
  <p class="form-warning">Username is required</p>
  }
  @if (signupForm.get('username')?.hasError('maxlength')) {
  <p class="form-warning">Username must be less than 25 characters</p>
  }
  @if (signupForm.get('username')?.hasError('invalidUsername')) {
  <p class="form-warning">Only letters, numbers, and (-) are allowed</p>
  }
  }

  <label for="email">Email: </label>
  <input type="email" formControlName="email" />
  @if (signupForm.get('email')?.invalid && signupForm.get('email')?.touched) {

  @if (signupForm.get('email')?.hasError('required')) {
  <p class="form-warning">Email is required</p>
  }
  @if (signupForm.get('email')?.hasError('email')) {
  <p class="form-warning">Please enter a valid email</p>
  }
  @if (signupForm.get('email')?.hasError('xssEmail')) {
  <p class="form-warning">Email contains invalid characters</p>
  }
  }

  <label for="password">Password: </label>
  <input type="password" formControlName="password" />
  @if (isPasswordInvalid) {
  <p class="form-warning">Invalid password</p>
  }

  <label for="confirmPassword">Confirm Password: </label>
  <input type="password" formControlName="confirmPassword" />
  @if (passwordsDoNotMatch) {
  <p class="form-warning">Passwords do not match</p>
  }

  <button type="submit" class="submit-btn" [disabled]="signupForm.invalid">
    Create Account
  </button>

  <div class="signin-link">
    Already have an account? <a [routerLink]="['/signin']">Sign In</a>
  </div>

  <!-- Give user a feedback to signup status: (success/fail) -->
  @if (SignupStatusMessage()) {
  <div class="status-message" [ngClass]="{ 'error': SignupError(), 'success': !SignupError() }">
    {{ SignupStatusMessage() }}
  </div>
  }
</form>